\hypertarget{bttlship_8c}{
\section{src/bttlship.c File Reference}
\label{bttlship_8c}\index{src/bttlship.c@{src/bttlship.c}}
}


Battleship module.  


{\ttfamily \#include \char`\"{}bttlship.h\char`\"{}}\par
Include dependency graph for bttlship.c:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=420pt]{bttlship_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{bttlship_8c_a52e47768a66b91e89d5546a8cb0f168c}{battleship} ()
\begin{DoxyCompactList}\small\item\em It's the main process of the battleship, it generates the whole table and ships. \item\end{DoxyCompactList}\item 
void \hyperlink{bttlship_8c_ac475b6f9eb4174c8579f3d4709b0e219}{cleanup} (\hyperlink{types_8h_a158b5efbc244b8995c439d60c976c818}{key\_\-t} shmid, \hyperlink{types_8h_a158b5efbc244b8995c439d60c976c818}{key\_\-t} semid)
\begin{DoxyCompactList}\small\item\em Destroys the used shared memory and semaphores. \item\end{DoxyCompactList}\item 
void \hyperlink{bttlship_8c_a03d7f39ab8509bab171aecf4d4fc7b9e}{attachTable} (\hyperlink{struct_s___t_a_b_l_e}{S\_\-TABLE} $\ast$$\ast$table, \hyperlink{types_8h_a158b5efbc244b8995c439d60c976c818}{key\_\-t} shmid, char $\ast$$\ast$shmp)
\begin{DoxyCompactList}\small\item\em It attaches itself to the already created memory. \item\end{DoxyCompactList}\item 
void \hyperlink{bttlship_8c_a03efcb954008fc3018e19f0353b58157}{recount} (\hyperlink{struct_s___t_a_b_l_e}{S\_\-TABLE} $\ast$$\ast$tableS, int $\ast$flg\_\-game\_\-over)
\begin{DoxyCompactList}\small\item\em It counts the amount of bombs that the player has left. \item\end{DoxyCompactList}\item 
void \hyperlink{bttlship_8c_aef4b6e9d64c7bff5215251a7bec36b37}{bomb} (int x, int y, \hyperlink{struct_s___t_a_b_l_e}{S\_\-TABLE} $\ast$$\ast$tableS)
\begin{DoxyCompactList}\small\item\em It puts the bomb on a specific position of the table. \item\end{DoxyCompactList}\item 
int \hyperlink{bttlship_8c_a4003a14058da5be60c7e7600713cd5c0}{getInput} (int $\ast$px, int $\ast$py, \hyperlink{struct_s___t_a_b_l_e}{S\_\-TABLE} $\ast$$\ast$table)
\begin{DoxyCompactList}\small\item\em It obtains the the row and the column of the table from STDIN. \item\end{DoxyCompactList}\item 
int \hyperlink{bttlship_8c_a6554029a39cab2edd50f67075f949926}{draw\_\-hz} (int sx, int sy, int z, int who, \hyperlink{struct_s___t_a_b_l_e}{S\_\-TABLE} $\ast$$\ast$tableS)
\begin{DoxyCompactList}\small\item\em It draws the horizontal ship. \item\end{DoxyCompactList}\item 
int \hyperlink{bttlship_8c_a2d3705cb0dd809d88cd03e1bb39afb09}{draw\_\-vt} (int sx, int sy, int z, int who, \hyperlink{struct_s___t_a_b_l_e}{S\_\-TABLE} $\ast$$\ast$tableS)
\begin{DoxyCompactList}\small\item\em It draws the horizontal ship. \item\end{DoxyCompactList}\item 
void \hyperlink{bttlship_8c_ae442293b5a53448d5a03e47e38396009}{genBattle} (\hyperlink{struct_s___t_a_b_l_e}{S\_\-TABLE} $\ast$$\ast$tableS)
\begin{DoxyCompactList}\small\item\em It generates the table. \item\end{DoxyCompactList}\item 
void \hyperlink{bttlship_8c_afcb21d332942ec61fd523fed20b758e5}{showRow} (void)
\begin{DoxyCompactList}\small\item\em It prints each row of the table. \item\end{DoxyCompactList}\item 
void \hyperlink{bttlship_8c_a21c4f719d9c70f144ffbb7b4ab57d935}{showBattle} (\hyperlink{struct_s___t_a_b_l_e}{S\_\-TABLE} $\ast$$\ast$tableS, int us, int them, int $\ast$flg\_\-game\_\-over)
\begin{DoxyCompactList}\small\item\em It prints the table of the battlehsip. \item\end{DoxyCompactList}\item 
void \hyperlink{bttlship_8c_af66d7960a49eb99b5260ba4d524e1ac8}{lockTable} (int semx, int block, \hyperlink{struct_s___t_a_b_l_e}{S\_\-TABLE} $\ast$$\ast$tableS)
\begin{DoxyCompactList}\small\item\em It decides if it has to lock the table or wait for the opponent. Peform semaphore wait/notifies: ARGUMENTS: semx 0 : table lock semaphore 1 : opponent notify semaphore block 0 : perform notify 1 : perform wait. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Battleship module. \begin{DoxyAuthor}{Author}
Luciano Zemin, Nicolás Magni, Nicolás Purita 
\end{DoxyAuthor}


Definition in file \hyperlink{bttlship_8c_source}{bttlship.c}.



\subsection{Function Documentation}
\hypertarget{bttlship_8c_a03d7f39ab8509bab171aecf4d4fc7b9e}{
\index{bttlship.c@{bttlship.c}!attachTable@{attachTable}}
\index{attachTable@{attachTable}!bttlship.c@{bttlship.c}}
\subsubsection[{attachTable}]{\setlength{\rightskip}{0pt plus 5cm}void attachTable ({\bf S\_\-TABLE} $\ast$$\ast$ {\em table}, \/  {\bf key\_\-t} {\em shmid}, \/  char $\ast$$\ast$ {\em shmp})}}
\label{bttlship_8c_a03d7f39ab8509bab171aecf4d4fc7b9e}


It attaches itself to the already created memory. 


\begin{DoxyParams}{Parameters}
\item[{\em table}]The adress of the table. \item[{\em shmid}]The shared memory segment id. \item[{\em shmp}]The adress where to store the shared memory segment pointer. \end{DoxyParams}


Definition at line 195 of file bttlship.c.



Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=143pt]{bttlship_8c_a03d7f39ab8509bab171aecf4d4fc7b9e_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=113pt]{bttlship_8c_a03d7f39ab8509bab171aecf4d4fc7b9e_icgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_a52e47768a66b91e89d5546a8cb0f168c}{
\index{bttlship.c@{bttlship.c}!battleship@{battleship}}
\index{battleship@{battleship}!bttlship.c@{bttlship.c}}
\subsubsection[{battleship}]{\setlength{\rightskip}{0pt plus 5cm}int battleship ()}}
\label{bttlship_8c_a52e47768a66b91e89d5546a8cb0f168c}


It's the main process of the battleship, it generates the whole table and ships. 



Definition at line 12 of file bttlship.c.



Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=284pt]{bttlship_8c_a52e47768a66b91e89d5546a8cb0f168c_cgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_aef4b6e9d64c7bff5215251a7bec36b37}{
\index{bttlship.c@{bttlship.c}!bomb@{bomb}}
\index{bomb@{bomb}!bttlship.c@{bttlship.c}}
\subsubsection[{bomb}]{\setlength{\rightskip}{0pt plus 5cm}void bomb (int {\em x}, \/  int {\em y}, \/  {\bf S\_\-TABLE} $\ast$$\ast$ {\em tableS})}}
\label{bttlship_8c_aef4b6e9d64c7bff5215251a7bec36b37}


It puts the bomb on a specific position of the table. 


\begin{DoxyParams}{Parameters}
\item[{\em x}]The row of the table \item[{\em y}]The column of the table \item[{\em tableS}]The address of the table. \end{DoxyParams}


Definition at line 231 of file bttlship.c.



Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=96pt]{bttlship_8c_aef4b6e9d64c7bff5215251a7bec36b37_icgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_ac475b6f9eb4174c8579f3d4709b0e219}{
\index{bttlship.c@{bttlship.c}!cleanup@{cleanup}}
\index{cleanup@{cleanup}!bttlship.c@{bttlship.c}}
\subsubsection[{cleanup}]{\setlength{\rightskip}{0pt plus 5cm}void cleanup ({\bf key\_\-t} {\em shmid}, \/  {\bf key\_\-t} {\em semid})}}
\label{bttlship_8c_ac475b6f9eb4174c8579f3d4709b0e219}


Destroys the used shared memory and semaphores. 


\begin{DoxyParams}{Parameters}
\item[{\em shmid}]The id of the shared memory segment. \item[{\em semid}]The id of the semaphore. \end{DoxyParams}


Definition at line 186 of file bttlship.c.



Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=140pt]{bttlship_8c_ac475b6f9eb4174c8579f3d4709b0e219_cgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_a6554029a39cab2edd50f67075f949926}{
\index{bttlship.c@{bttlship.c}!draw\_\-hz@{draw\_\-hz}}
\index{draw\_\-hz@{draw\_\-hz}!bttlship.c@{bttlship.c}}
\subsubsection[{draw\_\-hz}]{\setlength{\rightskip}{0pt plus 5cm}int draw\_\-hz (int {\em sx}, \/  int {\em sy}, \/  int {\em z}, \/  int {\em who}, \/  {\bf S\_\-TABLE} $\ast$$\ast$ {\em tableS})}}
\label{bttlship_8c_a6554029a39cab2edd50f67075f949926}


It draws the horizontal ship. 


\begin{DoxyParams}{Parameters}
\item[{\em sx}]Inner use. \item[{\em sy}]Inner use. \item[{\em z}]Inner use. \item[{\em who}]Iner use. \item[{\em tableS}]The address of the table. \end{DoxyParams}


Definition at line 283 of file bttlship.c.



Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=155pt]{bttlship_8c_a6554029a39cab2edd50f67075f949926_icgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_a2d3705cb0dd809d88cd03e1bb39afb09}{
\index{bttlship.c@{bttlship.c}!draw\_\-vt@{draw\_\-vt}}
\index{draw\_\-vt@{draw\_\-vt}!bttlship.c@{bttlship.c}}
\subsubsection[{draw\_\-vt}]{\setlength{\rightskip}{0pt plus 5cm}int draw\_\-vt (int {\em sx}, \/  int {\em sy}, \/  int {\em z}, \/  int {\em who}, \/  {\bf S\_\-TABLE} $\ast$$\ast$ {\em tableS})}}
\label{bttlship_8c_a2d3705cb0dd809d88cd03e1bb39afb09}


It draws the horizontal ship. 


\begin{DoxyParams}{Parameters}
\item[{\em sx}]Inner use. \item[{\em sy}]Inner use. \item[{\em z}]Inner use. \item[{\em who}]Inner use. \item[{\em tableS}]The address of the table. \end{DoxyParams}


Definition at line 320 of file bttlship.c.



Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=155pt]{bttlship_8c_a2d3705cb0dd809d88cd03e1bb39afb09_icgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_ae442293b5a53448d5a03e47e38396009}{
\index{bttlship.c@{bttlship.c}!genBattle@{genBattle}}
\index{genBattle@{genBattle}!bttlship.c@{bttlship.c}}
\subsubsection[{genBattle}]{\setlength{\rightskip}{0pt plus 5cm}void genBattle ({\bf S\_\-TABLE} $\ast$$\ast$ {\em tableS})}}
\label{bttlship_8c_ae442293b5a53448d5a03e47e38396009}


It generates the table. 


\begin{DoxyParams}{Parameters}
\item[{\em tableS}]The address of the table. \end{DoxyParams}


Definition at line 357 of file bttlship.c.



Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=191pt]{bttlship_8c_ae442293b5a53448d5a03e47e38396009_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=108pt]{bttlship_8c_ae442293b5a53448d5a03e47e38396009_icgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_a4003a14058da5be60c7e7600713cd5c0}{
\index{bttlship.c@{bttlship.c}!getInput@{getInput}}
\index{getInput@{getInput}!bttlship.c@{bttlship.c}}
\subsubsection[{getInput}]{\setlength{\rightskip}{0pt plus 5cm}int getInput (int $\ast$ {\em px}, \/  int $\ast$ {\em py}, \/  {\bf S\_\-TABLE} $\ast$$\ast$ {\em table})}}
\label{bttlship_8c_a4003a14058da5be60c7e7600713cd5c0}


It obtains the the row and the column of the table from STDIN. 


\begin{DoxyParams}{Parameters}
\item[{\em px}]The row of the table \item[{\em py}]The column of the table \item[{\em table}]The address of the table. \end{DoxyParams}


Definition at line 241 of file bttlship.c.



Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=167pt]{bttlship_8c_a4003a14058da5be60c7e7600713cd5c0_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=105pt]{bttlship_8c_a4003a14058da5be60c7e7600713cd5c0_icgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_af66d7960a49eb99b5260ba4d524e1ac8}{
\index{bttlship.c@{bttlship.c}!lockTable@{lockTable}}
\index{lockTable@{lockTable}!bttlship.c@{bttlship.c}}
\subsubsection[{lockTable}]{\setlength{\rightskip}{0pt plus 5cm}void lockTable (int {\em semx}, \/  int {\em block}, \/  {\bf S\_\-TABLE} $\ast$$\ast$ {\em tableS})}}
\label{bttlship_8c_af66d7960a49eb99b5260ba4d524e1ac8}


It decides if it has to lock the table or wait for the opponent. Peform semaphore wait/notifies: ARGUMENTS: semx 0 : table lock semaphore 1 : opponent notify semaphore block 0 : perform notify 1 : perform wait. 


\begin{DoxyParams}{Parameters}
\item[{\em semx}]It is the parameter to decide what have to do with semaphore \item[{\em block}]It decides what have to do with the table \item[{\em tableS}]The adress of the table. \end{DoxyParams}


Definition at line 450 of file bttlship.c.



Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=146pt]{bttlship_8c_af66d7960a49eb99b5260ba4d524e1ac8_cgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_a03efcb954008fc3018e19f0353b58157}{
\index{bttlship.c@{bttlship.c}!recount@{recount}}
\index{recount@{recount}!bttlship.c@{bttlship.c}}
\subsubsection[{recount}]{\setlength{\rightskip}{0pt plus 5cm}void recount ({\bf S\_\-TABLE} $\ast$$\ast$ {\em tableS}, \/  int $\ast$ {\em flg\_\-game\_\-over})}}
\label{bttlship_8c_a03efcb954008fc3018e19f0353b58157}


It counts the amount of bombs that the player has left. 


\begin{DoxyParams}{Parameters}
\item[{\em tableS}]The address of the table. \item[{\em flg\_\-game\_\-over}]The adress of the game status. \end{DoxyParams}


Definition at line 210 of file bttlship.c.



Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=158pt]{bttlship_8c_a03efcb954008fc3018e19f0353b58157_icgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_a21c4f719d9c70f144ffbb7b4ab57d935}{
\index{bttlship.c@{bttlship.c}!showBattle@{showBattle}}
\index{showBattle@{showBattle}!bttlship.c@{bttlship.c}}
\subsubsection[{showBattle}]{\setlength{\rightskip}{0pt plus 5cm}void showBattle ({\bf S\_\-TABLE} $\ast$$\ast$ {\em tableS}, \/  int {\em us}, \/  int {\em them}, \/  int $\ast$ {\em flg\_\-game\_\-over})}}
\label{bttlship_8c_a21c4f719d9c70f144ffbb7b4ab57d935}


It prints the table of the battlehsip. 


\begin{DoxyParams}{Parameters}
\item[{\em tableS}]The address of the table. \item[{\em us}]Inner use. \item[{\em them}]Inner use. \item[{\em flg\_\-game\_\-over}]The address of the game status. \end{DoxyParams}


Definition at line 400 of file bttlship.c.



Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=192pt]{bttlship_8c_a21c4f719d9c70f144ffbb7b4ab57d935_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=112pt]{bttlship_8c_a21c4f719d9c70f144ffbb7b4ab57d935_icgraph}
\end{center}
\end{figure}


\hypertarget{bttlship_8c_afcb21d332942ec61fd523fed20b758e5}{
\index{bttlship.c@{bttlship.c}!showRow@{showRow}}
\index{showRow@{showRow}!bttlship.c@{bttlship.c}}
\subsubsection[{showRow}]{\setlength{\rightskip}{0pt plus 5cm}void showRow (void)}}
\label{bttlship_8c_afcb21d332942ec61fd523fed20b758e5}


It prints each row of the table. 



Definition at line 389 of file bttlship.c.



Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=136pt]{bttlship_8c_afcb21d332942ec61fd523fed20b758e5_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=162pt]{bttlship_8c_afcb21d332942ec61fd523fed20b758e5_icgraph}
\end{center}
\end{figure}


